(this["webpackJsonpbook-inventory-ui"]=this["webpackJsonpbook-inventory-ui"]||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(23)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(7),u=n.n(o),s=(n(15),n(2)),i=n(9),l=n(3),m=n.n(l),f=n(4),d=n(1),p=(n(17),n(18),function(e){var t=e.data,n=e.index,a=e.onChange,r=e.onView,o=e.hasResults,u=e.onRemove;return c.a.createElement("div",{className:"query-container"},c.a.createElement("div",{className:"query-header"},c.a.createElement("p",{className:"query-index"},"Query\xa0",n),c.a.createElement("span",{className:"query-icons"},o&&c.a.createElement("span",{className:"query-result",onClick:function(e){return r()}},c.a.createElement("i",{className:"fas fa-eye"})),c.a.createElement("span",{className:"query-edit",onClick:function(e){return u()}},c.a.createElement("i",{className:"fas fa-minus"})),c.a.createElement("span",{className:"query-remove",onClick:function(e){return a()}},c.a.createElement("i",{className:"fas fa-pencil-alt"})))),c.a.createElement("p",{className:"query-text"},"Retrieve top ".concat(t.topN," most frequent tokens from text with length between ").concat(t.minLength," and ").concat(t.maxLength)))}),h=(n(19),function(e){var t=e.children,n=e.onDeactivate,a=e.isActive,o=Object(r.useState)(!1),u=Object(d.a)(o,2),s=u[0],i=u[1],l=Object(r.useRef)(!1);return!a||l.current||s||(l.current=!0,setTimeout((function(){i(!0)}),300)),c.a.createElement("div",{className:"modal-container ".concat(a?"modal-container--active":""),onClick:function(e){l.current=!1,n(),i(!1),e.stopPropagation()}},c.a.createElement("div",{className:"modal-children-container ".concat(s?"modal-children--visible":""),onClick:function(e){return e.stopPropagation()}},t))}),v=(n(20),function(e){var t=e.children,n=e.onClose;return c.a.createElement("div",{className:"page-component"},c.a.createElement("div",{className:"page-content"},t),c.a.createElement("div",{className:"close-page",onClick:function(e){return n()}},c.a.createElement("span",null,c.a.createElement("i",{className:"fas fa-times-circle"}))))}),N=(n(21),n(22),function(e){var t=e.value,n=e.handleChange,a=e.extraClasses,r=e.placeholder,o=e.disabled;return c.a.createElement("div",{className:"custom-input align-self-stretch flex flex-column ".concat(a," ").concat(o?"custom-input--disabled":"")},c.a.createElement("div",{className:"disabling-overlay",onClick:function(e){e.stopPropagation(),e.preventDefault()}}),c.a.createElement("input",{type:"text",value:t,onChange:function(e){return n(e.target.value)},placeholder:r}),c.a.createElement("span",{className:"pen-icon flex-centered"},c.a.createElement("i",{className:"fas fa-pen"})))}),y=function(e){var t=e.value,n=e.handleChange,a=e.extraClasses,o=e.placeholder,u=e.disabled,s=e.min,i=e.max,l=e.step,m=t.toString(),f=Object(r.useState)(),p=Object(d.a)(f,2),h=p[0],v=p[1];return c.a.createElement("div",{className:"custom-input align-self-stretch flex flex-column ".concat(a," ").concat(u?"custom-input--disabled":"")},c.a.createElement("div",{className:"disabling-overlay",onClick:function(e){e.stopPropagation(),e.preventDefault()}}),c.a.createElement("input",{type:"number",value:h?"":t,onChange:function(e){e.target.value?(v(void 0),n(e.target.value)):(v(m),n(m))},min:s,max:i,step:l,placeholder:o}),c.a.createElement("span",{className:"pen-icon flex-centered"},c.a.createElement("i",{className:"fas fa-pen"})))};N.defaultProps={value:"",extraClasses:"",placeholder:"Your Input Here",disabled:!1},Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Object(s.a)({},N.defaultProps),Object(s.a)({},N.defaultProps),function(e){e[e.TOPN=0]="TOPN",e[e.MIN=1]="MIN",e[e.MAX=2]="MAX"}(a||(a={}));var b=function(e){var t=e.data,n=e.onChange,o=Object(r.useState)(t),u=Object(d.a)(o,2),i=u[0],l=u[1],m=function(e,t){var n=i;t===a.TOPN&&(n.topN=parseFloat(e)),t===a.MIN&&(n.minLength=parseFloat(e)),t===a.MAX&&(n.maxLength=parseFloat(e)),l(Object(s.a)({},n))};return c.a.createElement("div",{className:"query-editor"},c.a.createElement("div",{className:"query-item"},c.a.createElement("div",{className:"supporting-text"},"Enter minimum length of tokens of interest"),c.a.createElement(y,{value:i.topN,handleChange:function(e){return m(e,a.TOPN)}})),c.a.createElement("div",{className:"query-item"},c.a.createElement("div",{className:"supporting-text"},"Enter minimum length of tokens of interest"),c.a.createElement(y,{value:i.minLength,handleChange:function(e){return m(e,a.MIN)}})),c.a.createElement("div",{className:"query-item"},c.a.createElement("div",{className:"supporting-text"},"Enter minimum length of tokens of interest"),c.a.createElement(y,{value:i.maxLength,handleChange:function(e){return m(e,a.MAX)}})),c.a.createElement("div",{className:"query-item"},c.a.createElement("button",{className:"btn btn-main",onClick:function(){return n(Object(s.a)({},i))}},"Save Query")))},g=n(8),E=n(5),k=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a=arguments.length>3?arguments[3]:void 0,r={"content-type":"application/json"},c=e,o={method:n,headers:Object(s.a)({},r,{},a)};if(t)switch(n.toLowerCase()){case"get":var u=Object.keys(t),i=Object.values(t).reduce((function(e,t,n){return t&&(e[u[n]]=t),e}),{});Object.values(i).join("")&&(c+=Object.keys(i).reduce((function(e,t,n){return"".concat(e).concat(0===n?"?":"&").concat(t,"=").concat(i[t])}),""));break;default:o.body=JSON.stringify(t)}return console.log("[fetch] Fetching at '".concat(c,"' with options '").concat(JSON.stringify(o),"'")),new Promise((function(e,t){fetch(c,o).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},O=function(e){return new Date(new Date(e).getTime()-6e4*(new Date).getTimezoneOffset()).toISOString().replace(/.[0-9]+Z$/,"").replace("T"," ")},j={toBookSummary:function(e){var t=this;return{id:e.id?e.id:"",meta:e.meta?e.meta:"",idType:e.idType?e.idType:"",wordsCount:e.wordsCount||0===e.wordsCount?e.wordsCount:NaN,uniqueWordsCount:e.uniqueWordsCount||0===e.uniqueWordsCount?e.uniqueWordsCount:NaN,summaryDurationSec:e.summaryDurationSec||0===e.summaryDurationSec?e.summaryDurationSec:NaN,createdAt:e.createdAt?e.createdAt:0,_createdAt:e.createdAt?O(e.createdAt):"Invalid Date",mostFrequentWord:this.toTokenSummary(e.mostFrequentWord),longestWord:this.toTokenSummary(e.longestWord),results:e.results?e.results.map((function(e){return t.toQuerySummary(e)})):[]}},toQuerySummary:function(e){var t=this;return{uiQuery:this.toUIQueryItem(e.minTokenLength,e.maxTokenLength,e.topNCount),createdAt:e.createdAt?e.createdAt:0,_createdAt:e.createdAt?O(e.createdAt):"Invalid Date",durationMs:e.durationMs||0===e.durationMs?e.durationMs:NaN,data:e.data?e.data.map((function(e){return t.toTokenSummary(e)})):[]}},toTokenSummary:function(e){return{key:e.key?e.key:"",frequency:e.frequency||0===e.frequency?e.frequency:NaN,length:e.length||0===e.length?e.length:NaN}},toUIQueryItem:function(e,t,n){return{minLength:e||0===e?e:NaN,maxLength:t||0===t?t:NaN,topN:n||0===n?n:NaN}}},C=function(){function e(){Object(g.a)(this,e),this.urlBaseDevelopment="http://localhost:5050/",this.urlBaseProduction="https://corpus-inventory.herokuapp.com/",this.urlBase="",this.urlGetAllBooks="api/corpusinventory",this.urlProcessABook="api/corpusinventory",console.warn("[DC]: App is in Production Mode"),this.urlBase=this.urlBaseProduction,this.urlBase=this.urlBaseDevelopment}return Object(E.a)(e,[{key:"getVersion",value:function(){return"1.0"}}]),Object(E.a)(e,[{key:"buildURL",value:function(e){return"".concat(this.urlBase).concat(e)}},{key:"getBooks",value:function(){var e=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(this.buildURL(this.urlGetAllBooks));case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return j.toBookSummary(e)})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBookById",value:function(){var e=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("".concat(this.buildURL(this.urlGetAllBooks),"/").concat(t));case 2:return n=e.sent,e.abrupt("return",j.toBookSummary(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processBook",value:function(e,t){var n=this;return new Promise(function(){var a=Object(f.a)(m.a.mark((function a(r,c){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,k("".concat(n.buildURL(n.urlProcessABook)),e,"POST").then((function(e){console.log(e),t(),r(j.toBookSummary(e))})).catch((function(e){c(e)}));case 2:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}}]),e}();var x=function(){var e=Object(r.useRef)(null);null===e.current&&(e.current=new C),console.log("[App]: Data Controller Version: ",e.current.getVersion());var t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],o=n[1],u=Object(r.useState)(!1),l=Object(d.a)(u,2),N=l[0],y=l[1],g=Object(r.useState)(-1),E=Object(d.a)(g,2),k=E[0],O=E[1],j=Object(r.useState)(!1),x=Object(d.a)(j,2),w=x[0],S=x[1],A=Object(r.useState)(""),q=Object(d.a)(A,2),B=q[0],T=q[1],P=Object(r.useState)([]),D=Object(d.a)(P,2),L=D[0],I=D[1],M=Object(r.useState)(),R=Object(d.a)(M,2),W=R[0],Q=R[1],F=function(){var t=Object(f.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(n=e.current)||void 0===n?void 0:n.processBook({book:B,queries:L},(function(){}));case 2:a=t.sent,Q(a),S(!0);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return console.warn("[App]: Query Results: ",W),c.a.createElement("main",{className:"App"},c.a.createElement("section",{className:"app-container"},c.a.createElement("section",{className:"book-selector"},c.a.createElement("div",{className:"selector-icons"},c.a.createElement("span",{className:"reset-selection",onClick:function(e){return I([]),y(!1),O(-1),o(!1),void T("")}},c.a.createElement("i",{className:"fas fa-reply-all"})),w&&c.a.createElement("span",{className:"view-result",onClick:function(e){return y(!0),void o(!0)}},c.a.createElement("i",{className:"fas fa-eye"}))),c.a.createElement("textarea",{onChange:function(e){return T(e.target.value)},placeholder:"Enter the text to be processed, or its url...",defaultValue:B})),c.a.createElement("section",{className:"queries-area"},L&&L.map((function(e,t){return c.a.createElement(p,{data:e,key:t,hasResults:w,index:t+1,onChange:function(){return e=t,y(!0),O(e),void o(!0);var e},onView:function(){return e=t,y(!0),O(e),void o(!0);var e},onRemove:function(){return e=t,void I((function(t){return t.filter((function(t,n){return n!==e}))}));var e}})})),c.a.createElement("div",{className:"add-query",onClick:function(e){return I((function(e){return[].concat(Object(i.a)(e),[{minLength:0,maxLength:10,topN:50}])}))}},c.a.createElement("i",{className:"fas fa-plus"}),c.a.createElement("span",null,"*Add Query"))),c.a.createElement("section",{className:"submit-button-area"},c.a.createElement("button",{className:"btn btn-main",onClick:function(e){return F()}},"Process Content")),c.a.createElement("section",{className:"modal-container"},c.a.createElement(h,{isActive:a,onDeactivate:function(){return o(!1)}},c.a.createElement(v,{onClose:function(){return o(!1)}},N&&c.a.createElement(b,{data:L[k],onChange:function(e){return I((function(t){return setTimeout((function(){y(!1)}),300),o(!1),t.map((function(t,n){return n===k&&(t=Object(s.a)({},e)),t}))}))}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(c.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.ff966e68.chunk.js.map