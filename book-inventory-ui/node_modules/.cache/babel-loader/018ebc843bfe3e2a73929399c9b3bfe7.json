{"ast":null,"code":"import _objectSpread from\"C:\\\\PersonalProjects\\\\corpus-word-inventory\\\\book-inventory-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:\\\\PersonalProjects\\\\corpus-word-inventory\\\\book-inventory-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:\\\\PersonalProjects\\\\corpus-word-inventory\\\\book-inventory-ui\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\PersonalProjects\\\\corpus-word-inventory\\\\book-inventory-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\PersonalProjects\\\\corpus-word-inventory\\\\book-inventory-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from'react';import'./App.css';import Query from'./components/Query/Query';import Modal from'./components/Modal/Modal';import Page from'./components/Pages/Page';import QueryEditor from'./components/QueryEditor/QueryEditor';import DataController from'./data.controller/data.controller';import QueryViewer from'./components/QueryViewer/QueryViewer';import SummaryViewer from'./components/SummaryViewer/SummaryViewer';function App(){var dc=useRef(null);dc.current===null&&(dc.current=new DataController());console.log('[App]: Data Controller Version: ',dc.current.getVersion());var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isModalActive=_useState2[0],setIsModalActive=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isEditingQuery=_useState4[0],setIsEditingQuery=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isViewingResult=_useState6[0],setIsViewingResult=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isViewingSummary=_useState8[0],setIsViewingSummary=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isFetching=_useState10[0],setIsFetching=_useState10[1];var _useState11=useState(-1),_useState12=_slicedToArray(_useState11,2),indexOfQueryOnModal=_useState12[0],setIndexOfQueryOnModal=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),hasResults=_useState14[0],setHasResults=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),textToProcess=_useState16[0],setTextToProcess=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),feedback=_useState18[0],setFeedback=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),queries=_useState20[0],setQueries=_useState20[1];var _useState21=useState(),_useState22=_slicedToArray(_useState21,2),queriesResults=_useState22[0],setQueriesResults=_useState22[1];var handleQueryEdit=function handleQueryEdit(queryIndex){setIsEditingQuery(true);setIndexOfQueryOnModal(queryIndex);setIsModalActive(true);};var handleQueryView=function handleQueryView(queryIndex){setIsViewingResult(true);setIndexOfQueryOnModal(queryIndex);setIsModalActive(true);};var handleResultSummaryView=function handleResultSummaryView(){setIsViewingSummary(true);// setIndexOfQueryOnModal(queryIndex)\nsetIsModalActive(true);};var handleQueryRemoval=function handleQueryRemoval(queryIndex){setQueries(function(qs){return qs.filter(function(q,index){return index!==queryIndex;});});};var resetUi=function resetUi(){setQueries([]);setIsEditingQuery(false);setIsViewingResult(false);setIsViewingSummary(false);setIndexOfQueryOnModal(-1);setIsModalActive(false);setTextToProcess(\"\");setIsFetching(false);setHasResults(false);setFeedback(\"\");};var handleModalClose=function handleModalClose(){setIsModalActive(false);setTimeout(function(){setIsEditingQuery(false);setIsViewingResult(false);setIsViewingSummary(false);setIndexOfQueryOnModal(-1);},300);};var handleBookProcessing=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _dc$current;var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setTimeout(function(){setIsFetching(true);setHasResults(false);setFeedback(\"Processing Text. This will take a minute... or two...\");},0);_context.next=3;return(_dc$current=dc.current)===null||_dc$current===void 0?void 0:_dc$current.processBook({book:textToProcess,queries:queries},function(){});case 3:res=_context.sent;setQueriesResults(res);setTimeout(function(){setIsFetching(false);setHasResults(true);setFeedback(\"Text was successfully processed... \");},0);setTimeout(function(){setFeedback(\"\");},3000);case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleBookProcessing(){return _ref.apply(this,arguments);};}();var handleCopy=function handleCopy(evt,text){evt.preventDefault();console.log('[App]: \\n',text);navigator.clipboard.writeText(text);};console.warn(\"[App]: Query Results: \",queriesResults);return React.createElement(\"main\",{className:\"App\"},React.createElement(\"section\",{className:\"app-container\"},React.createElement(\"section\",{className:\"book-selector\"},React.createElement(\"div\",{className:\"selector-icons\"},React.createElement(\"span\",{className:\"reset-selection\",onClick:function onClick(evt){return resetUi();}},React.createElement(\"i\",{className:\"fas fa-reply-all\"})),hasResults&&React.createElement(\"span\",{className:\"view-result\",onClick:function onClick(evt){return handleResultSummaryView();}},React.createElement(\"i\",{className:\"fas fa-eye\"}))),React.createElement(\"textarea\",{onChange:function onChange(evt){return setTextToProcess(evt.target.value);},placeholder:\"Enter the text to be processed, or its url...\"// defaultValue={textToProcess}\n,value:textToProcess}),React.createElement(\"div\",{className:\"progressbar \".concat(isFetching?'progressbar--running':'')}),React.createElement(\"div\",{className:\"feedback\"},feedback&&React.createElement(\"p\",null,feedback))),React.createElement(\"section\",{className:\"queries-area\"},queries&&queries.map(function(query,index){return React.createElement(Query,{data:query,key:index,hasResults:hasResults,index:index+1,onChange:function onChange(){return handleQueryEdit(index);},onView:function onView(){return handleQueryView(index);},onRemove:function onRemove(){return handleQueryRemoval(index);}});}),React.createElement(\"div\",{className:\"add-query\",onClick:function onClick(evt){return setQueries(function(queries){return[].concat(_toConsumableArray(queries),[{minLength:0,maxLength:10,topN:50}]);});}},React.createElement(\"i\",{className:\"fas fa-plus\"}),React.createElement(\"span\",null,\"*Add Query\"))),React.createElement(\"section\",{className:\"submit-button-area\"},React.createElement(\"button\",{className:\"btn btn-main\",onClick:function onClick(evt){return handleBookProcessing();}},\"Process Content\")),React.createElement(\"section\",{className:\"modal-container \".concat(isViewingResult||isViewingSummary?'modal-container--bg-white':'')},React.createElement(Modal,{isActive:isModalActive,onDeactivate:function onDeactivate(){return handleModalClose();}},React.createElement(Page,{onClose:function onClose(){return handleModalClose();}},isEditingQuery&&React.createElement(QueryEditor,{data:queries[indexOfQueryOnModal],onChange:function onChange(data){return setQueries(function(qs){setTimeout(function(){setIsEditingQuery(false);},300);setIsModalActive(false);return qs.map(function(q,index){index===indexOfQueryOnModal&&(q=_objectSpread({},data));return q;});});}}),isViewingResult&&queriesResults&&React.createElement(QueryViewer,{data:queriesResults===null||queriesResults===void 0?void 0:queriesResults.results[indexOfQueryOnModal],onCopy:function onCopy(evt,text){return handleCopy(evt,text);}}),isViewingSummary&&queriesResults&&React.createElement(SummaryViewer,{data:queriesResults,onCopy:function onCopy(evt,text){return handleCopy(evt,text);}}))))));}export default App;","map":{"version":3,"sources":["C:/PersonalProjects/corpus-word-inventory/book-inventory-ui/src/App.tsx"],"names":["React","useState","useRef","Query","Modal","Page","QueryEditor","DataController","QueryViewer","SummaryViewer","App","dc","current","console","log","getVersion","isModalActive","setIsModalActive","isEditingQuery","setIsEditingQuery","isViewingResult","setIsViewingResult","isViewingSummary","setIsViewingSummary","isFetching","setIsFetching","indexOfQueryOnModal","setIndexOfQueryOnModal","hasResults","setHasResults","textToProcess","setTextToProcess","feedback","setFeedback","queries","setQueries","queriesResults","setQueriesResults","handleQueryEdit","queryIndex","handleQueryView","handleResultSummaryView","handleQueryRemoval","qs","filter","q","index","resetUi","handleModalClose","setTimeout","handleBookProcessing","processBook","book","res","handleCopy","evt","text","preventDefault","navigator","clipboard","writeText","warn","target","value","map","query","minLength","maxLength","topN","data","results"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\r\nimport './App.css';\r\nimport { TUIQueryItem, TBookSummary } from './data.controller/data.types';\r\nimport Query from './components/Query/Query';\r\nimport Modal from './components/Modal/Modal';\r\nimport Page from './components/Pages/Page';\r\nimport QueryEditor from './components/QueryEditor/QueryEditor';\r\nimport DataController from './data.controller/data.controller';\r\nimport QueryViewer from './components/QueryViewer/QueryViewer';\r\nimport SummaryViewer from './components/SummaryViewer/SummaryViewer';\r\n\r\n\r\n\r\nfunction App() {\r\n\r\n  let dc = useRef<DataController|null>(null);\r\n  (dc.current === null) && (dc.current = new DataController());\r\n  console.log('[App]: Data Controller Version: ', dc.current.getVersion())\r\n\r\n  const [isModalActive, setIsModalActive] = useState<boolean>(false)\r\n  const [isEditingQuery, setIsEditingQuery] = useState<boolean>(false)\r\n  const [isViewingResult, setIsViewingResult] = useState<boolean>(false)\r\n  const [isViewingSummary, setIsViewingSummary] = useState<boolean>(false)\r\n  const [isFetching, setIsFetching] = useState<boolean>(false)\r\n  const [indexOfQueryOnModal, setIndexOfQueryOnModal] = useState<number>(-1)\r\n  const [hasResults, setHasResults] = useState<boolean>(false)\r\n  const [textToProcess, setTextToProcess] = useState<string>(\"\")\r\n  const [feedback, setFeedback] = useState<string>(\"\")\r\n  const [queries, setQueries] = useState<TUIQueryItem[]>([])\r\n  const [queriesResults, setQueriesResults] = useState<TBookSummary|null>()\r\n\r\n  const handleQueryEdit = (queryIndex: number)=>{\r\n    setIsEditingQuery(true)\r\n    setIndexOfQueryOnModal(queryIndex)\r\n    setIsModalActive(true)\r\n  }\r\n  const handleQueryView = (queryIndex: number)=>{\r\n    setIsViewingResult(true)\r\n    setIndexOfQueryOnModal(queryIndex)\r\n    setIsModalActive(true)\r\n  }\r\n  const handleResultSummaryView = () =>{\r\n    setIsViewingSummary(true)\r\n    // setIndexOfQueryOnModal(queryIndex)\r\n    setIsModalActive(true)\r\n  }\r\n  const handleQueryRemoval = (queryIndex: number)=>{\r\n    setQueries(qs => qs.filter((q, index) => index !== queryIndex))\r\n  }\r\n  const resetUi = ()=>{\r\n    setQueries([]);\r\n    setIsEditingQuery(false)\r\n    setIsViewingResult(false)\r\n    setIsViewingSummary(false)\r\n    setIndexOfQueryOnModal(-1)\r\n    setIsModalActive(false)\r\n    setTextToProcess(\"\")\r\n    setIsFetching(false)\r\n    setHasResults(false)\r\n    setFeedback(\"\")\r\n  }\r\n  const handleModalClose = ()=>{\r\n    \r\n    setIsModalActive(false)\r\n\r\n    setTimeout(()=>{\r\n      setIsEditingQuery(false)\r\n      setIsViewingResult(false)\r\n      setIsViewingSummary(false)\r\n      setIndexOfQueryOnModal(-1)\r\n    }, 300)\r\n    \r\n  }\r\n  const handleBookProcessing = async ()=>{\r\n    \r\n    setTimeout(()=>{\r\n      setIsFetching(true)\r\n      setHasResults(false)\r\n      setFeedback(\"Processing Text. This will take a minute... or two...\")\r\n    }, 0)\r\n    \r\n    const res = await dc.current?.processBook({book: textToProcess, queries: queries}, ()=>{})\r\n    setQueriesResults(res)\r\n    \r\n\r\n    setTimeout(()=>{\r\n      setIsFetching(false)\r\n      setHasResults(true)\r\n      setFeedback(\"Text was successfully processed... \")\r\n    }, 0)\r\n\r\n    setTimeout(()=>{\r\n      setFeedback(\"\")\r\n    }, 3000)\r\n  }\r\n  const handleCopy = (evt: any, text: string)=>{\r\n    evt.preventDefault();\r\n    console.log('[App]: \\n', text);\r\n    navigator.clipboard.writeText(text);\r\n  }\r\n  console.warn(\"[App]: Query Results: \", queriesResults)\r\n  return (\r\n    <main className=\"App\">\r\n      <section className=\"app-container\">\r\n\r\n        <section className=\"book-selector\">\r\n          <div className=\"selector-icons\">\r\n            <span className=\"reset-selection\" onClick={evt => resetUi()}><i className=\"fas fa-reply-all\"></i></span>\r\n            {hasResults && (<span className=\"view-result\" onClick={evt => handleResultSummaryView()}><i className=\"fas fa-eye\"></i></span>)}\r\n          </div>\r\n\r\n          <textarea onChange={(evt)=>setTextToProcess(evt.target.value)}\r\n                    placeholder=\"Enter the text to be processed, or its url...\"\r\n                    // defaultValue={textToProcess}\r\n                    value={textToProcess}\r\n          >\r\n          </textarea>\r\n          <div className={`progressbar ${isFetching ? 'progressbar--running' : ''}`}></div>\r\n\r\n          <div className=\"feedback\">\r\n            {feedback && (<p>{feedback}</p>)}\r\n          </div>\r\n        </section>\r\n\r\n\r\n\r\n\r\n        <section className=\"queries-area\">\r\n          {\r\n            queries && (\r\n              queries.map((query, index) => <Query data={query} key={index} hasResults={hasResults} index={index+1} onChange={()=>handleQueryEdit(index)} onView={()=>handleQueryView(index)} onRemove={()=>handleQueryRemoval(index)}/>)\r\n            )\r\n          }\r\n          <div className=\"add-query\" \r\n               onClick={evt=>setQueries(queries=> [...queries, {minLength: 0,maxLength: 10,topN: 50}])}>\r\n            <i className=\"fas fa-plus\"></i>\r\n            <span>*Add Query</span>\r\n          </div>\r\n        </section>\r\n\r\n\r\n\r\n\r\n\r\n        \r\n        <section className=\"submit-button-area\">\r\n          <button className=\"btn btn-main\" onClick={evt => handleBookProcessing()}>\r\n            Process Content\r\n          </button>\r\n        </section>\r\n\r\n\r\n\r\n\r\n\r\n\r\n        <section className={`modal-container ${isViewingResult || isViewingSummary ? 'modal-container--bg-white' : ''}`}>\r\n          <Modal isActive={isModalActive} onDeactivate={()=>handleModalClose()} >\r\n            <Page onClose={()=>handleModalClose()}>\r\n              {\r\n                isEditingQuery && (\r\n                  <QueryEditor  data={queries[indexOfQueryOnModal]} \r\n                              onChange={data => setQueries(qs => {\r\n                                setTimeout(()=>{\r\n                                  setIsEditingQuery(false)\r\n                                }, 300)\r\n                                \r\n                                setIsModalActive(false)\r\n                                return qs.map((q, index) => {\r\n                                  (index === indexOfQueryOnModal) && (q = {...data})\r\n                                  return q\r\n                                })\r\n                              })}\r\n                  />\r\n                )\r\n              }\r\n              {\r\n                isViewingResult && queriesResults && (\r\n                  <QueryViewer data={queriesResults?.results[indexOfQueryOnModal]} onCopy={(evt, text)=>handleCopy(evt, text)}/>\r\n                )\r\n              }\r\n\r\n              {\r\n                isViewingSummary && queriesResults && (\r\n                  <SummaryViewer data={queriesResults} onCopy={(evt, text)=>handleCopy(evt, text)}/>\r\n                )\r\n              }\r\n            </Page>\r\n          </Modal>\r\n        </section>       \r\n\r\n\r\n\r\n\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}