{"ast":null,"code":"var timestampToLocaleString=function timestampToLocaleString(ts){return new Date(new Date(ts).getTime()-new Date().getTimezoneOffset()*60000).toISOString().replace(/.[0-9]+Z$/,'').replace('T',' ');};var typeConverter={toBookSummary:function toBookSummary(bookObj){var _this=this;return{id:bookObj[\"id\"]?bookObj[\"id\"]:\"\",meta:bookObj[\"meta\"]?bookObj[\"meta\"]:\"\",idType:bookObj[\"idType\"]?bookObj[\"idType\"]:\"\",wordsCount:bookObj[\"wordsCount\"]||bookObj[\"wordsCount\"]===0?bookObj[\"wordsCount\"]:NaN,uniqueWordsCount:bookObj[\"uniqueWordsCount\"]||bookObj[\"uniqueWordsCount\"]===0?bookObj[\"uniqueWordsCount\"]:NaN,summaryDurationSec:bookObj[\"summaryDurationSec\"]||bookObj[\"summaryDurationSec\"]===0?bookObj[\"summaryDurationSec\"]:NaN,createdAt:bookObj[\"createdAt\"]?bookObj[\"createdAt\"]:0,_createdAt:bookObj[\"createdAt\"]?timestampToLocaleString(bookObj[\"createdAt\"]):\"Invalid Date\",mostFrequentWord:this.toTokenSummary(bookObj[\"mostFrequentWord\"]),leastFrequentWord:this.toTokenSummary(bookObj[\"leastFrequentWord\"]),longestWord:this.toTokenSummary(bookObj[\"longestWord\"]),shortestWord:this.toTokenSummary(bookObj[\"shortestWord\"]),results:bookObj[\"results\"]?bookObj[\"results\"].map(function(res){return _this.toQuerySummary(res);}):[]};},toQuerySummary:function toQuerySummary(resObj){var _this2=this;return{uiQuery:this.toUIQueryItem(resObj[\"minTokenLength\"],resObj[\"maxTokenLength\"],resObj[\"topNCount\"]),createdAt:resObj[\"createdAt\"]?resObj[\"createdAt\"]:0,_createdAt:resObj[\"createdAt\"]?timestampToLocaleString(resObj[\"createdAt\"]):\"Invalid Date\",durationMs:resObj[\"durationMs\"]||resObj[\"durationMs\"]===0?resObj[\"durationMs\"]:NaN,data:resObj[\"data\"]?resObj[\"data\"].map(function(item){return _this2.toTokenSummary(item);}):[]};},toTokenSummary:function toTokenSummary(tokenObj){return{key:tokenObj[\"key\"]?tokenObj[\"key\"]:\"\",frequency:tokenObj[\"frequency\"]||tokenObj[\"frequency\"]===0?tokenObj[\"frequency\"]:NaN,length:tokenObj[\"length\"]||tokenObj[\"length\"]===0?tokenObj[\"length\"]:NaN};},toUIQueryItem:function toUIQueryItem(minTokenLength,maxTokenLength,topNCount){return{minLength:minTokenLength||minTokenLength===0?minTokenLength:NaN,maxLength:maxTokenLength||maxTokenLength===0?maxTokenLength:NaN,topN:topNCount||topNCount===0?topNCount:NaN};}};export{typeConverter};","map":{"version":3,"sources":["C:/PersonalProjects/corpus-word-inventory/book-inventory-ui/src/data.controller/data.types.ts"],"names":["timestampToLocaleString","ts","Date","getTime","getTimezoneOffset","toISOString","replace","typeConverter","toBookSummary","bookObj","id","meta","idType","wordsCount","NaN","uniqueWordsCount","summaryDurationSec","createdAt","_createdAt","mostFrequentWord","toTokenSummary","leastFrequentWord","longestWord","shortestWord","results","map","res","toQuerySummary","resObj","uiQuery","toUIQueryItem","durationMs","data","item","tokenObj","key","frequency","length","minTokenLength","maxTokenLength","topNCount","minLength","maxLength","topN"],"mappings":"AAqDA,GAAMA,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,CAACC,EAAD,QAAc,IAAIC,CAAAA,IAAJ,CAAS,GAAIA,CAAAA,IAAJ,CAASD,EAAT,EAAaE,OAAb,GAAyB,GAAID,CAAAA,IAAJ,GAAWE,iBAAX,GAAiC,KAAnE,EAA0EC,WAA1E,GAAwFC,OAAxF,CAAgG,WAAhG,CAA4G,EAA5G,EAAgHA,OAAhH,CAAwH,GAAxH,CAA4H,GAA5H,CAAd,EAAhC,CACA,GAAMC,CAAAA,aAA6B,CAAG,CACpCC,aADoC,wBACtBC,OADsB,CACK,gBACvC,MAAO,CACLC,EAAE,CAAED,OAAO,CAAC,IAAD,CAAP,CAAgBA,OAAO,CAAC,IAAD,CAAvB,CAAgC,EAD/B,CAELE,IAAI,CAAEF,OAAO,CAAC,MAAD,CAAP,CAAkBA,OAAO,CAAC,MAAD,CAAzB,CAAoC,EAFrC,CAGLG,MAAM,CAAEH,OAAO,CAAC,QAAD,CAAP,CAAoBA,OAAO,CAAC,QAAD,CAA3B,CAAwC,EAH3C,CAKLI,UAAU,CAAEJ,OAAO,CAAC,YAAD,CAAP,EAAyBA,OAAO,CAAC,YAAD,CAAP,GAA0B,CAAnD,CAAuDA,OAAO,CAAC,YAAD,CAA9D,CAA+EK,GALtF,CAMLC,gBAAgB,CAAEN,OAAO,CAAC,kBAAD,CAAP,EAA+BA,OAAO,CAAC,kBAAD,CAAP,GAAgC,CAA/D,CAAoEA,OAAO,CAAC,kBAAD,CAA3E,CAAkGK,GAN/G,CAOLE,kBAAkB,CAAEP,OAAO,CAAC,oBAAD,CAAP,EAAiCA,OAAO,CAAC,oBAAD,CAAP,GAAkC,CAAnE,CAAwEA,OAAO,CAAC,oBAAD,CAA/E,CAAwGK,GAPvH,CAQLG,SAAS,CAAER,OAAO,CAAC,WAAD,CAAP,CAAuBA,OAAO,CAAC,WAAD,CAA9B,CAA8C,CARpD,CASLS,UAAU,CAAET,OAAO,CAAC,WAAD,CAAP,CAAuBT,uBAAuB,CAACS,OAAO,CAAC,WAAD,CAAR,CAA9C,CAAuE,cAT9E,CAWLU,gBAAgB,CAAE,KAAKC,cAAL,CAAoBX,OAAO,CAAC,kBAAD,CAA3B,CAXb,CAYLY,iBAAiB,CAAE,KAAKD,cAAL,CAAoBX,OAAO,CAAC,mBAAD,CAA3B,CAZd,CAaLa,WAAW,CAAE,KAAKF,cAAL,CAAoBX,OAAO,CAAC,aAAD,CAA3B,CAbR,CAcLc,YAAY,CAAE,KAAKH,cAAL,CAAoBX,OAAO,CAAC,cAAD,CAA3B,CAdT,CAgBLe,OAAO,CAAEf,OAAO,CAAC,SAAD,CAAP,CAAqBA,OAAO,CAAC,SAAD,CAAP,CAAmBgB,GAAnB,CAAuB,SAACC,GAAD,QAAc,CAAA,KAAI,CAACC,cAAL,CAAoBD,GAApB,CAAd,EAAvB,CAArB,CAAsF,EAhB1F,CAAP,CAkBD,CApBmC,CAwBpCC,cAxBoC,yBAwBrBC,MAxBqB,CAwBO,iBACvC,MAAO,CACLC,OAAO,CAAE,KAAKC,aAAL,CAAmBF,MAAM,CAAC,gBAAD,CAAzB,CAA6CA,MAAM,CAAC,gBAAD,CAAnD,CAAuEA,MAAM,CAAC,WAAD,CAA7E,CADJ,CAELX,SAAS,CAAEW,MAAM,CAAC,WAAD,CAAN,CAAsBA,MAAM,CAAC,WAAD,CAA5B,CAA4C,CAFlD,CAGLV,UAAU,CAAEU,MAAM,CAAC,WAAD,CAAN,CAAsB5B,uBAAuB,CAAC4B,MAAM,CAAC,WAAD,CAAP,CAA7C,CAAqE,cAH5E,CAILG,UAAU,CAAEH,MAAM,CAAC,YAAD,CAAN,EAAwBA,MAAM,CAAC,YAAD,CAAN,GAAyB,CAAjD,CAAqDA,MAAM,CAAC,YAAD,CAA3D,CAA4Ed,GAJnF,CAKLkB,IAAI,CAAEJ,MAAM,CAAC,MAAD,CAAN,CAAiBA,MAAM,CAAC,MAAD,CAAN,CAAeH,GAAf,CAAmB,SAACQ,IAAD,QAAe,CAAA,MAAI,CAACb,cAAL,CAAoBa,IAApB,CAAf,EAAnB,CAAjB,CAAgF,EALjF,CAAP,CAOH,CAhCmC,CAmCpCb,cAnCoC,yBAmCrBc,QAnCqB,CAmCS,CACzC,MAAO,CACLC,GAAG,CAAED,QAAQ,CAAC,KAAD,CAAR,CAAkBA,QAAQ,CAAC,KAAD,CAA1B,CAAoC,EADpC,CAELE,SAAS,CAAEF,QAAQ,CAAC,WAAD,CAAR,EAAyBA,QAAQ,CAAC,WAAD,CAAR,GAA0B,CAAnD,CAAuDA,QAAQ,CAAC,WAAD,CAA/D,CAA+EpB,GAFrF,CAGLuB,MAAM,CAAEH,QAAQ,CAAC,QAAD,CAAR,EAAsBA,QAAQ,CAAC,QAAD,CAAR,GAAuB,CAA7C,CAAiDA,QAAQ,CAAC,QAAD,CAAzD,CAAsEpB,GAHzE,CAAP,CAKH,CAzCmC,CA4CpCgB,aA5CoC,wBA4CtBQ,cA5CsB,CA4CEC,cA5CF,CA4C0BC,SA5C1B,CA4C2D,CAC3F,MAAO,CACLC,SAAS,CAAEH,cAAc,EAAIA,cAAc,GAAK,CAArC,CAAyCA,cAAzC,CAA0DxB,GADhE,CAEL4B,SAAS,CAAEH,cAAc,EAAIA,cAAc,GAAK,CAArC,CAA0CA,cAA1C,CAA2DzB,GAFjE,CAGL6B,IAAI,CAAEH,SAAS,EAAIA,SAAS,GAAK,CAA3B,CAAgCA,SAAhC,CAA4C1B,GAH7C,CAAP,CAKH,CAlDmC,CAAtC,CAqDA,OAAQP,aAAR","sourcesContent":["\r\nexport type TBookSummary = {\r\n  id: string,\r\n  meta: string,\r\n  idType: string,\r\n  wordsCount: number,\r\n  uniqueWordsCount: number,\r\n  mostFrequentWord: TTokenSummary,\r\n  leastFrequentWord: TTokenSummary,\r\n  longestWord: TTokenSummary,\r\n  shortestWord: TTokenSummary,\r\n  summaryDurationSec: number,\r\n  createdAt: number,\r\n  _createdAt: string,\r\n  results: TQuerySummary[]\r\n}\r\n\r\n\r\nexport type TTokenSummary = {\r\n  key: string,\r\n  frequency: number,\r\n  length: number\r\n}\r\n\r\nexport type TQuerySummary = {\r\n  uiQuery: TUIQueryItem\r\n  createdAt: number\r\n  _createdAt: string\r\n  durationMs: number\r\n  data: TTokenSummary[]\r\n}\r\n\r\n\r\n\r\nexport type TUIQueryItem = {\r\n  minLength: number,\r\n  maxLength: number,\r\n  topN: number\r\n}\r\n\r\nexport type TUIQuery = {\r\n  book: string,\r\n  queries: TUIQueryItem[]\r\n}\r\n\r\nexport type TTypeConverter = {\r\n  toBookSummary: (bookObj: any) => TBookSummary,\r\n  toTokenSummary: (tokenObj: any) => TTokenSummary,\r\n  toQuerySummary: (resObj: any) => TQuerySummary,\r\n  toUIQueryItem: (minTokenLength: number, maxTokenLength: number, topNCount: number) => TUIQueryItem\r\n}\r\n\r\n\r\nconst timestampToLocaleString = (ts: number)=>new Date(new Date(ts).getTime() - new Date().getTimezoneOffset() * 60000).toISOString().replace(/.[0-9]+Z$/,'').replace('T',' ')\r\nconst typeConverter: TTypeConverter = {\r\n  toBookSummary(bookObj: any): TBookSummary{\r\n    return {\r\n      id: bookObj[\"id\"] ? bookObj[\"id\"] : \"\",\r\n      meta: bookObj[\"meta\"] ? bookObj[\"meta\"] : \"\",\r\n      idType: bookObj[\"idType\"] ? bookObj[\"idType\"] : \"\",\r\n\r\n      wordsCount: bookObj[\"wordsCount\"] || bookObj[\"wordsCount\"] === 0 ? bookObj[\"wordsCount\"] : NaN,\r\n      uniqueWordsCount: bookObj[\"uniqueWordsCount\"] || bookObj[\"uniqueWordsCount\"] === 0  ? bookObj[\"uniqueWordsCount\"] : NaN,\r\n      summaryDurationSec: bookObj[\"summaryDurationSec\"] || bookObj[\"summaryDurationSec\"] === 0  ? bookObj[\"summaryDurationSec\"] : NaN,\r\n      createdAt: bookObj[\"createdAt\"] ? bookObj[\"createdAt\"] : 0,\r\n      _createdAt: bookObj[\"createdAt\"] ? timestampToLocaleString(bookObj[\"createdAt\"]) : \"Invalid Date\",\r\n\r\n      mostFrequentWord: this.toTokenSummary(bookObj[\"mostFrequentWord\"]),\r\n      leastFrequentWord: this.toTokenSummary(bookObj[\"leastFrequentWord\"]),\r\n      longestWord: this.toTokenSummary(bookObj[\"longestWord\"]),\r\n      shortestWord: this.toTokenSummary(bookObj[\"shortestWord\"]),\r\n      \r\n      results: bookObj[\"results\"] ? bookObj[\"results\"].map((res: any) => this.toQuerySummary(res)) : []\r\n    }\r\n  },\r\n\r\n\r\n\r\n  toQuerySummary(resObj: any): TQuerySummary {\r\n      return {\r\n        uiQuery: this.toUIQueryItem(resObj[\"minTokenLength\"], resObj[\"maxTokenLength\"], resObj[\"topNCount\"]),\r\n        createdAt: resObj[\"createdAt\"] ? resObj[\"createdAt\"] : 0,\r\n        _createdAt: resObj[\"createdAt\"] ? timestampToLocaleString(resObj[\"createdAt\"]) : \"Invalid Date\",\r\n        durationMs: resObj[\"durationMs\"] || resObj[\"durationMs\"] === 0 ? resObj[\"durationMs\"] : NaN,\r\n        data: resObj[\"data\"] ? resObj[\"data\"].map((item: any) => this.toTokenSummary(item)) : []\r\n      }\r\n  },\r\n\r\n\r\n  toTokenSummary(tokenObj: any): TTokenSummary {\r\n      return {\r\n        key: tokenObj[\"key\"] ? tokenObj[\"key\"] : \"\",\r\n        frequency: tokenObj[\"frequency\"] || tokenObj[\"frequency\"] === 0 ? tokenObj[\"frequency\"] : NaN,\r\n        length: tokenObj[\"length\"] || tokenObj[\"length\"] === 0 ? tokenObj[\"length\"] : NaN,\r\n      }\r\n  },\r\n\r\n\r\n  toUIQueryItem(minTokenLength: number, maxTokenLength: number, topNCount: number): TUIQueryItem {\r\n      return {\r\n        minLength: minTokenLength || minTokenLength === 0 ? minTokenLength : NaN,\r\n        maxLength: maxTokenLength || maxTokenLength === 0  ? maxTokenLength : NaN,\r\n        topN: topNCount || topNCount === 0  ? topNCount : NaN,\r\n      }\r\n  }\r\n}\r\n\r\nexport {typeConverter};\r\n"]},"metadata":{},"sourceType":"module"}