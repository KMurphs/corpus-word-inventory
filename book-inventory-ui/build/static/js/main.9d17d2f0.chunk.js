(this["webpackJsonpbook-inventory-ui"]=this["webpackJsonpbook-inventory-ui"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(25)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(7),s=a.n(o),l=(a(15),a(2)),u=a(9),i=a(3),m=a.n(i),d=a(4),p=a(1),f=(a(17),a(18),function(e){var t=e.data,a=e.index,n=e.onChange,r=e.onView,o=e.hasResults,s=e.onRemove;return c.a.createElement("div",{className:"query-container"},c.a.createElement("div",{className:"query-header"},c.a.createElement("p",{className:"query-index"},"Query\xa0",a),c.a.createElement("span",{className:"query-icons"},o&&c.a.createElement("span",{className:"query-result",onClick:function(e){return r()}},c.a.createElement("i",{className:"fas fa-eye"})),c.a.createElement("span",{className:"query-edit",onClick:function(e){return s()}},c.a.createElement("i",{className:"fas fa-minus"})),c.a.createElement("span",{className:"query-remove",onClick:function(e){return n()}},c.a.createElement("i",{className:"fas fa-pencil-alt"})))),c.a.createElement("p",{className:"query-text"},"Retrieve top ".concat(t.topN," most frequent tokens from text with length between ").concat(t.minLength," and ").concat(t.maxLength)))}),h=(a(19),function(e){var t=e.children,a=e.onDeactivate,n=e.isActive,o=Object(r.useState)(!1),s=Object(p.a)(o,2),l=s[0],u=s[1],i=Object(r.useRef)(!1);return!n||i.current||l||(i.current=!0,setTimeout((function(){u(!0)}),300)),c.a.createElement("div",{className:"modal-container ".concat(n?"modal-container--active":""),onClick:function(e){i.current=!1,a(),u(!1),e.stopPropagation()}},c.a.createElement("div",{className:"modal-children-container ".concat(l?"modal-children--visible":""),onClick:function(e){return e.stopPropagation()}},t))}),y=(a(20),function(e){var t=e.children,a=e.onClose;return c.a.createElement("div",{className:"page-component"},c.a.createElement("div",{className:"page-content"},t),c.a.createElement("div",{className:"close-page",onClick:function(e){return a()}},c.a.createElement("span",null,c.a.createElement("i",{className:"fas fa-times-circle"}))))}),E=(a(21),a(22),function(e){var t=e.value,a=e.handleChange,n=e.extraClasses,r=e.placeholder,o=e.disabled;return c.a.createElement("div",{className:"custom-input align-self-stretch flex flex-column ".concat(n," ").concat(o?"custom-input--disabled":"")},c.a.createElement("div",{className:"disabling-overlay",onClick:function(e){e.stopPropagation(),e.preventDefault()}}),c.a.createElement("input",{type:"text",value:t,onChange:function(e){return a(e.target.value)},placeholder:r}),c.a.createElement("span",{className:"pen-icon flex-centered"},c.a.createElement("i",{className:"fas fa-pen"})))}),v=function(e){var t=e.value,a=e.handleChange,n=e.extraClasses,o=e.placeholder,s=e.disabled,l=e.min,u=e.max,i=e.step,m=t.toString(),d=Object(r.useState)(),f=Object(p.a)(d,2),h=f[0],y=f[1];return c.a.createElement("div",{className:"custom-input align-self-stretch flex flex-column ".concat(n," ").concat(s?"custom-input--disabled":"")},c.a.createElement("div",{className:"disabling-overlay",onClick:function(e){e.stopPropagation(),e.preventDefault()}}),c.a.createElement("input",{type:"number",value:h?"":t,onChange:function(e){e.target.value?(y(void 0),a(e.target.value)):(y(m),a(m))},min:l,max:u,step:i,placeholder:o}),c.a.createElement("span",{className:"pen-icon flex-centered"},c.a.createElement("i",{className:"fas fa-pen"})))};E.defaultProps={value:"",extraClasses:"",placeholder:"Your Input Here",disabled:!1},Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Object(l.a)({},E.defaultProps),Object(l.a)({},E.defaultProps),function(e){e[e.TOPN=0]="TOPN",e[e.MIN=1]="MIN",e[e.MAX=2]="MAX"}(n||(n={}));var N=function(e){var t=e.data,a=e.onChange,o=Object(r.useState)(t),s=Object(p.a)(o,2),u=s[0],i=s[1],m=function(e,t){var a=u;t===n.TOPN&&(a.topN=parseFloat(e)),t===n.MIN&&(a.minLength=parseFloat(e)),t===n.MAX&&(a.maxLength=parseFloat(e)),i(Object(l.a)({},a))};return c.a.createElement("div",{className:"query-editor"},c.a.createElement("div",{className:"query-item"},c.a.createElement("div",{className:"supporting-text"},"Enter minimum length of tokens of interest"),c.a.createElement(v,{value:u.topN,handleChange:function(e){return m(e,n.TOPN)}})),c.a.createElement("div",{className:"query-item"},c.a.createElement("div",{className:"supporting-text"},"Enter minimum length of tokens of interest"),c.a.createElement(v,{value:u.minLength,handleChange:function(e){return m(e,n.MIN)}})),c.a.createElement("div",{className:"query-item"},c.a.createElement("div",{className:"supporting-text"},"Enter maximum length of tokens of interest"),c.a.createElement(v,{value:u.maxLength,handleChange:function(e){return m(e,n.MAX)}})),c.a.createElement("div",{className:"query-item"},c.a.createElement("button",{className:"btn btn-main",onClick:function(){return a(Object(l.a)({},u))}},"Save Query")))},g=a(8),k=a(5),b=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n=arguments.length>3?arguments[3]:void 0,r={"content-type":"application/json"},c=e,o={method:a,headers:Object(l.a)({},r,{},n)};if(t)switch(a.toLowerCase()){case"get":var s=Object.keys(t),u=Object.values(t).reduce((function(e,t,a){return t&&(e[s[a]]=t),e}),{});Object.values(u).join("")&&(c+=Object.keys(u).reduce((function(e,t,a){return"".concat(e).concat(0===a?"?":"&").concat(t,"=").concat(u[t])}),""));break;default:o.body=JSON.stringify(t)}return console.log("[fetch] Fetching at '".concat(c,"' with options '").concat(JSON.stringify(o),"'")),new Promise((function(e,t){fetch(c,o).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},q=function(e){return new Date(new Date(e).getTime()-6e4*(new Date).getTimezoneOffset()).toISOString().replace(/.[0-9]+Z$/,"").replace("T"," ")},w={toBookSummary:function(e){var t=this;return{id:e.id?e.id:"",meta:e.meta?e.meta:"",idType:e.idType?e.idType:"",wordsCount:e.wordsCount||0===e.wordsCount?e.wordsCount:NaN,uniqueWordsCount:e.uniqueWordsCount||0===e.uniqueWordsCount?e.uniqueWordsCount:NaN,summaryDurationSec:e.summaryDurationSec||0===e.summaryDurationSec?e.summaryDurationSec:NaN,createdAt:e.createdAt?e.createdAt:0,_createdAt:e.createdAt?q(e.createdAt):"Invalid Date",mostFrequentWord:this.toTokenSummary(e.mostFrequentWord),leastFrequentWord:this.toTokenSummary(e.leastFrequentWord),longestWord:this.toTokenSummary(e.longestWord),shortestWord:this.toTokenSummary(e.shortestWord),results:e.results?e.results.map((function(e){return t.toQuerySummary(e)})):[]}},toQuerySummary:function(e){var t=this;return{uiQuery:this.toUIQueryItem(e.minTokenLength,e.maxTokenLength,e.topNCount),createdAt:e.createdAt?e.createdAt:0,_createdAt:e.createdAt?q(e.createdAt):"Invalid Date",durationMs:e.durationMs||0===e.durationMs?e.durationMs:NaN,data:e.data?e.data.map((function(e){return t.toTokenSummary(e)})):[]}},toTokenSummary:function(e){return{key:e.key?e.key:"",frequency:e.frequency||0===e.frequency?e.frequency:NaN,length:e.length||0===e.length?e.length:NaN}},toUIQueryItem:function(e,t,a){return{minLength:e||0===e?e:NaN,maxLength:t||0===t?t:NaN,topN:a||0===a?a:NaN}}},O=function(){function e(){Object(g.a)(this,e),this.urlBaseDevelopment="http://localhost:5050/",this.urlBase="",this.urlGetAllBooks="api/corpusinventory",this.urlProcessABook="api/corpusinventory",this.urlBase="".concat(window.location.origin,"/"),-1!==this.urlBase.indexOf("localhost")&&(this.urlBase=this.urlBaseDevelopment)}return Object(k.a)(e,[{key:"getVersion",value:function(){return"1.0"}}]),Object(k.a)(e,[{key:"buildURL",value:function(e){return"".concat(this.urlBase).concat(e)}},{key:"getBooks",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(this.buildURL(this.urlGetAllBooks));case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return w.toBookSummary(e)})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBookById",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("".concat(this.buildURL(this.urlGetAllBooks),"/").concat(t));case 2:return a=e.sent,e.abrupt("return",w.toBookSummary(a));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processBook",value:function(e,t){var a=this;return new Promise(function(){var n=Object(d.a)(m.a.mark((function n(r,c){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b("".concat(a.buildURL(a.urlProcessABook)),e,"POST").then((function(e){console.log(e),t(),r(w.toBookSummary(e))})).catch((function(e){c(e)}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}}]),e}(),C=(a(23),function(e){var t=e.data,a=e.onCopy,n="\nQuery Summary (".concat((t.durationMs/1e3).toFixed(2),"sec)\nCreated at: ").concat(t._createdAt,"\nExecution Time: ").concat((t.durationMs/1e3).toFixed(2),"sec\nQuery Definition: Searching for top '").concat(t.uiQuery.topN,"' most frequent tokens with length between '").concat(t.uiQuery.minLength,"' and '").concat(t.uiQuery.maxLength,"'\n\nQuery Results:\n")+t.data.reduce((function(e,t,a){return e+"".concat(a+1," - Found '").concat(t.key,"' with frequency '").concat(t.frequency,"' and length '").concat(t.length,"'\n")}),"");return c.a.createElement("div",{className:"query-viewer"},c.a.createElement("div",{className:"query-copy"},c.a.createElement("span",{onClick:function(e){return a&&a(e,n)}},c.a.createElement("i",{className:"fas fa-copy"}))),c.a.createElement("div",{className:"query-meta"},c.a.createElement("h1",null,"Meta Data"),c.a.createElement("div",{className:"data-container"},c.a.createElement("p",null,"Query Timestamp"),c.a.createElement("p",{className:"data-item"},t._createdAt),c.a.createElement("p",null,"Query Duration"),c.a.createElement("p",{className:"data-item"},(t.durationMs/1e3).toFixed(2),"sec"))),c.a.createElement("div",{className:"query-object"},c.a.createElement("h1",null,"Query Summary"),c.a.createElement("h3",null,"Searching for top '",t.uiQuery.topN,"' most frequent tokens with length between '",t.uiQuery.minLength,"' and '",t.uiQuery.maxLength,"'"),c.a.createElement("div",{className:"data-container"},c.a.createElement("p",null,"Token Count"),c.a.createElement("p",null,"Minimum Length"),c.a.createElement("p",null,"Maximum Length"),c.a.createElement("p",{className:"data-item"},t.uiQuery.topN),c.a.createElement("p",{className:"data-item"},t.uiQuery.minLength),c.a.createElement("p",{className:"data-item"},t.uiQuery.maxLength))),c.a.createElement("div",{className:"query-result"},c.a.createElement("h1",null,"Query Results"),t.data.map((function(e,t){return c.a.createElement("div",{className:"data-container",key:t},c.a.createElement("h3",null,"Found '".concat(e.key,"' with frequency '").concat(e.frequency,"' and length '").concat(e.length,"'")),c.a.createElement("p",null,"Token"),c.a.createElement("p",null,"Frequency"),c.a.createElement("p",null,"Length"),c.a.createElement("p",{className:"data-item data-item-token"},e.key),c.a.createElement("p",{className:"data-item"},e.frequency),c.a.createElement("p",{className:"data-item"},e.length))}))))}),W=(a(24),function(e){var t=e.data,a=e.onCopy,n="\nBook Summary (".concat(t.summaryDurationSec.toFixed(2),"sec)\nBookID: ").concat(t.id," - ").concat(t.idType,"\nCreated at: ").concat(t._createdAt,"\n\nBook Contains '").concat(t.wordsCount,"' words in total of which '").concat(t.uniqueWordsCount,"' are unique\nMost Frequent word is '").concat(t.mostFrequentWord.key,"' with frequency '").concat(t.mostFrequentWord.frequency,"' and length '").concat(t.mostFrequentWord.length,"'\nLeast Repeated word is '").concat(t.leastFrequentWord.key,"' which is repeated '").concat(t.leastFrequentWord.frequency,"' times with a length '").concat(t.leastFrequentWord.length,"'\nLongest word is '").concat(t.longestWord.key,"' with frequency '").concat(t.longestWord.frequency,"' and length '").concat(t.longestWord.length,"'\nShortest word is '").concat(t.shortestWord.key,"' with frequency '").concat(t.shortestWord.frequency,"' and length '").concat(t.shortestWord.length,"'\n");return c.a.createElement("div",{className:"summary-viewer"},c.a.createElement("div",{className:"summary-copy"},c.a.createElement("span",{onClick:function(e){return a&&a(e,n)}},c.a.createElement("i",{className:"fas fa-copy"}))),c.a.createElement("div",{className:"summary-meta"},c.a.createElement("h1",null,"Meta Data"),c.a.createElement("div",{className:"data-container"},c.a.createElement("p",null,"ID"),c.a.createElement("p",{className:"data-item"},"".concat(t.id.substr(0,20),"... - ").concat(t.idType)),c.a.createElement("p",null,"Info"),c.a.createElement("p",{className:"data-item"},"".concat(t.meta).concat("book-hash"===t.idType?"...":"")),c.a.createElement("p",null,"Timestamp"),c.a.createElement("p",{className:"data-item"},t._createdAt),c.a.createElement("p",null,"Duration"),c.a.createElement("p",{className:"data-item"},t.summaryDurationSec.toFixed(2),"sec"))),c.a.createElement("div",{className:"summary-data"},c.a.createElement("h1",null,"Summary"),c.a.createElement("div",{className:"data-container"},c.a.createElement("p",null,"Words Count"),c.a.createElement("p",{className:"data-item"},t.wordsCount),c.a.createElement("p",null,"Unique Words"),c.a.createElement("p",{className:"data-item"},t.uniqueWordsCount)),c.a.createElement("div",{className:"data-container"},c.a.createElement("h3",null,"Most Frequent word is '".concat(t.mostFrequentWord.key,"' with frequency '").concat(t.mostFrequentWord.frequency,"' and length '").concat(t.mostFrequentWord.length,"'")),c.a.createElement("p",null,"Token"),c.a.createElement("p",null,"Frequency"),c.a.createElement("p",null,"Length"),c.a.createElement("p",{className:"data-item data-item-token"},t.mostFrequentWord.key),c.a.createElement("p",{className:"data-item"},t.mostFrequentWord.frequency),c.a.createElement("p",{className:"data-item"},t.mostFrequentWord.length)),c.a.createElement("div",{className:"data-container"},c.a.createElement("h3",null,"Least Repeated word is '".concat(t.leastFrequentWord.key,"' which is repeated '").concat(t.leastFrequentWord.frequency,"' times with a length of '").concat(t.leastFrequentWord.length,"'")),c.a.createElement("p",null,"Token"),c.a.createElement("p",null,"Frequency"),c.a.createElement("p",null,"Length"),c.a.createElement("p",{className:"data-item data-item-token"},t.leastFrequentWord.key),c.a.createElement("p",{className:"data-item"},t.leastFrequentWord.frequency),c.a.createElement("p",{className:"data-item"},t.leastFrequentWord.length)),c.a.createElement("div",{className:"data-container"},c.a.createElement("h3",null,"Longest word is '".concat(t.longestWord.key,"' with frequency '").concat(t.longestWord.frequency,"' and length '").concat(t.longestWord.length,"'")),c.a.createElement("p",null,"Token"),c.a.createElement("p",null,"Frequency"),c.a.createElement("p",null,"Length"),c.a.createElement("p",{className:"data-item data-item-token"},t.longestWord.key),c.a.createElement("p",{className:"data-item"},t.longestWord.frequency),c.a.createElement("p",{className:"data-item"},t.longestWord.length)),c.a.createElement("div",{className:"data-container"},c.a.createElement("h3",null,"Shortest word is '".concat(t.shortestWord.key,"' with frequency '").concat(t.shortestWord.frequency,"' and length '").concat(t.shortestWord.length,"'")),c.a.createElement("p",null,"Token"),c.a.createElement("p",null,"Frequency"),c.a.createElement("p",null,"Length"),c.a.createElement("p",{className:"data-item data-item-token"},t.shortestWord.key),c.a.createElement("p",{className:"data-item"},t.shortestWord.frequency),c.a.createElement("p",{className:"data-item"},t.shortestWord.length))))});var j=function(){var e=Object(r.useRef)(null);null===e.current&&(e.current=new O),console.log("[App]: Data Controller Version: ",e.current.getVersion());var t=Object(r.useState)(!1),a=Object(p.a)(t,2),n=a[0],o=a[1],s=Object(r.useState)(!1),i=Object(p.a)(s,2),E=i[0],v=i[1],g=Object(r.useState)(!1),k=Object(p.a)(g,2),b=k[0],q=k[1],w=Object(r.useState)(!1),j=Object(p.a)(w,2),x=j[0],S=j[1],T=Object(r.useState)(!1),F=Object(p.a)(T,2),A=F[0],L=F[1],B=Object(r.useState)(-1),D=Object(p.a)(B,2),Q=D[0],M=D[1],I=Object(r.useState)(!1),P=Object(p.a)(I,2),R=P[0],_=P[1],U=Object(r.useState)(""),G=Object(p.a)(U,2),X=G[0],V=G[1],J=Object(r.useState)(""),$=Object(p.a)(J,2),z=$[0],H=$[1],Y=Object(r.useState)([]),Z=Object(p.a)(Y,2),K=Z[0],ee=Z[1],te=Object(r.useState)(),ae=Object(p.a)(te,2),ne=ae[0],re=ae[1],ce=function(){o(!1),setTimeout((function(){v(!1),q(!1),S(!1),M(-1)}),300)},oe=function(){var t=Object(d.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return setTimeout((function(){L(!0),_(!1),H("Processing Text. This will take a minute... or two...")}),0),t.next=3,null===(a=e.current)||void 0===a?void 0:a.processBook({book:X,queries:K},(function(){}));case 3:n=t.sent,re(n),setTimeout((function(){L(!1),_(!0),H("Text was successfully processed... ")}),0),setTimeout((function(){H("")}),3e3);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),se=function(e,t){e.preventDefault(),console.log("[App]: \n",t),navigator.clipboard.writeText(t)};return console.warn("[App]: Query Results: ",ne),c.a.createElement("main",{className:"App"},c.a.createElement("section",{className:"app-container"},c.a.createElement("section",{className:"book-selector"},c.a.createElement("div",{className:"selector-icons"},c.a.createElement("span",{className:"reset-selection",onClick:function(e){return ee([]),v(!1),q(!1),S(!1),M(-1),o(!1),V(""),L(!1),_(!1),void H("")}},c.a.createElement("i",{className:"fas fa-reply-all"})),R&&c.a.createElement("span",{className:"view-result",onClick:function(e){return S(!0),void o(!0)}},c.a.createElement("i",{className:"fas fa-eye"}))),c.a.createElement("textarea",{onChange:function(e){return V(e.target.value)},placeholder:"Enter the text to be processed, or its url...",value:X}),c.a.createElement("div",{className:"progressbar ".concat(A?"progressbar--running":"")}),c.a.createElement("div",{className:"feedback"},z&&c.a.createElement("p",null,z))),c.a.createElement("section",{className:"queries-area"},K&&K.map((function(e,t){return c.a.createElement(f,{data:e,key:t,hasResults:R,index:t+1,onChange:function(){return e=t,v(!0),M(e),void o(!0);var e},onView:function(){return e=t,q(!0),M(e),void o(!0);var e},onRemove:function(){return e=t,void ee((function(t){return t.filter((function(t,a){return a!==e}))}));var e}})})),c.a.createElement("div",{className:"add-query",onClick:function(e){return ee((function(e){return[].concat(Object(u.a)(e),[{minLength:0,maxLength:10,topN:50}])}))}},c.a.createElement("i",{className:"fas fa-plus"}),c.a.createElement("span",null,"*Add Query"))),c.a.createElement("section",{className:"submit-button-area"},c.a.createElement("button",{className:"btn btn-main",onClick:function(e){return oe()}},"Process Content")),c.a.createElement("section",{className:"modal-container ".concat(b||x?"modal-container--bg-white":"")},c.a.createElement(h,{isActive:n,onDeactivate:function(){return ce()}},c.a.createElement(y,{onClose:function(){return ce()}},E&&c.a.createElement(N,{data:K[Q],onChange:function(e){return ee((function(t){return setTimeout((function(){v(!1)}),300),o(!1),t.map((function(t,a){return a===Q&&(t=Object(l.a)({},e)),t}))}))}}),b&&ne&&c.a.createElement(C,{data:null===ne||void 0===ne?void 0:ne.results[Q],onCopy:function(e,t){return se(e,t)}}),x&&ne&&c.a.createElement(W,{data:ne,onCopy:function(e,t){return se(e,t)}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.9d17d2f0.chunk.js.map